// Generated by CoffeeScript 1.6.3
var mat4;

mat4 = require('gl-matrix/src/gl-matrix/mat4').mat4;

module.exports = {
  convert: function(out, t) {
    var has, rot;
    has = t._has;
    if (has.movement) {
      mat4.translate(out, out, t.getMovement());
    }
    if (has.perspective) {
      throw Error("perspective not implemented yet");
    }
    if (has.rotation) {
      rot = t.getRotation();
      mat4.rotateX(out, out, rot[0]);
      mat4.rotateY(out, out, rot[1]);
      mat4.rotateZ(out, out, rot[2]);
    }
    if (has.localMovement) {
      mat4.translate(out, out, t.getLocalMovement());
    }
    if (has.localRotation) {
      rot = t.getLocalRotation();
      mat4.rotateX(out, out, rot[0]);
      mat4.rotateY(out, out, rot[1]);
      mat4.rotateZ(out, out, rot[2]);
    }
    if (has.scale) {
      mat4.scale(out, out, t.getScale());
    }
    return out;
  }
};
